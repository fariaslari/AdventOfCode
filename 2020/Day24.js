let rawInput = "enesenwwwsenewswsewenwwnwwnwnwswse\r\nswneswseesweswneswwwwseewnewswsw\r\nneneenenenenwneseneesenewenenwnenenesw\r\nweeswnenenwneneeesweneswenwneene\r\nnwnwnenwnwwnwnwnwnwwsewnwswnwwnwnwnw\r\nnwwwnwnwnenenwewnwseewnwswnwwnww\r\nsenwweneewewswweswsenwnesenwwnwswnw\r\nnwnwnenenenenwnesenenenwneswnwnweeswwsene\r\nwswnwswneneswswswswswnesweseswwswnwswsw\r\nneeeeeweseesesweeneweneesw\r\nwwenewwwwwwnwnwwwwwwwwse\r\nswneswswseseswswswsw\r\nseswswsewseesesese\r\nnenwneneneewseneneneenenenenenesenenew\r\nswswwwnewwsewwwswwwswswwnesew\r\nwwswwwwwwwwwwwswewwwwe\r\nsenewnwwnwswnwswnwewnenwenwewsenwnwse\r\nwnwnwenwwnwnwwnewnwswsenwnwnwnwwne\r\nnenwneswnwnwswnwnwesewwnwnwnwsenwnene\r\nwsewneeseneseseseswnesesenwswenwswnwe\r\nnesewnwwwswnweneenwswwesenesw\r\nswsesenwswsesesewswswneseseeswnesesesewsw\r\nneneswswwswswwswseswswewwswswswsew\r\neeeneeneneneneesweenewneneeee\r\nseeenesesweseeeewwneeseeseee\r\nnweeweeneeswenewe\r\nseswwnwseeswseseswswe\r\nwneneeswnesenwseneeneneneenwneneneenwne\r\nnewnenesenenenenenewneswnenenenenenenenese\r\nwswswswswwswwwwweswnwswsewswswsw\r\neeeeeenesenwewseeneeneneweee\r\nsewnwwnwnwwwnwnwnwnwswwwewnwww\r\nsewesenwswwneswnwnwnwsweseseeswwse\r\nnwwewnwweswswwwwewnwnwnwwnwwswe\r\nswwwswnwswswenwneswswseswsweswseswsene\r\neneeenwswseseeeeeesenwenwwsweee\r\nswseenwseesewnwnewnwneeeswswesenee\r\nswwsesenwnwnwwwwnewenwnwewwwwsw\r\nseeeeeeeeswnweeenwnwnewswesw\r\nseenwswnenenwnewnwnwnwnwe\r\nesenenweeswseeeseeweseseeeee\r\nswswswswseswswswswnenw\r\nneneseswsenenewneenenewwnenenenenenenene\r\nwnewwenweswswwwswseswswwwnesene\r\nseneneneweenwnwseeeweeseseeeene\r\nneenwsweneneeeswwnwwneeenewnene\r\nseseneswwneswseswwsesenwseseseswsesese\r\nwweeeeeeswsenweeneeee\r\nnewnenenwneseneneeneeneneseneneeneene\r\nwewnwnwwwwwwsenewnwwnwnwwwse\r\nweseeseseswnwsewseneneeeesewwe\r\nswswswswswswswswswswswwneswswwwswswe\r\nswsenwneeseswseswswswswseseneseswswswsw\r\nseswnenwwswswswneswsewwnewseswswwwsw\r\nswswswneswswseswnwswseswseswswseneseswsw\r\nwwwwnewesesewswwwnewwwne\r\nenweeneseneeeeswnwesw\r\neesesenwseseeseseesesese\r\nnwswseenesewwseesenee\r\nwwswswswwswswwneesw\r\nnewwseswwnewswwwwswnwewnewwsww\r\nnesenenenewenesenenenenwnwswnenwnwnenene\r\nswnwswswneswswneswswswswseswswseswsweswwsw\r\nswswswswswswneseswswseswnwswswswsweswsw\r\nnwwwwswwwsewwwwewnwewswwww\r\nneneeneeewneeneeeneenene\r\nswnwnwnwneswwwseeenewnewswsenwwnww\r\nnenenenwnenwneswnenwnenenenenene\r\nnwweenwesweeeeeeseeeeewnenese\r\nweeeneeseeeseeeseeeewe\r\nwwwwwnwesewwwswewwwwenww\r\nseneseseseseseneswsesesesewsewsesesese\r\neenwneneseeeeeesweenweeeenee\r\nneseneseseseseseeseswseeeeseewee\r\nnwswnweeeeseeseneeneneswswneneee\r\nsesesewseseswesesesewseeneeseesese\r\nseswnewwswewnwswneneswwnwnwnew\r\nwneseneeeewsesewneneneenenwswnwne\r\nwnwnenwnwnwnwsenenwnesenwnwnwnwnwnwnwnwwnw\r\nwwnewnwwswweswewswseeewenwsw\r\neneeneseeneneneewneweeeneeeneew\r\nnwwnwnwwnwnwenenwnwnwenwnenwnenwnenw\r\nnwsenwnwenwnwswsenwsenwnwnwnwnwnwswenwnw\r\neeseseeeeeseseeeneesenwseeswe\r\newenewneeneswewneseneswsewswwese\r\nnwwwwswwswswwse\r\nnewnwnwnwwwwnwnwswsewewnwwwwnwnw\r\nseswswnwwseseseswseesw\r\nsewseweswwwwwswwwwwswwwwnwne\r\nsenenenenwnwnwnwnwnwnwnwnw\r\nswswswwwwswswwnwwwswwesewwww\r\nseeneseseneseesesesewsesesesesenwseswsw\r\nwnenwnwsewwwnwnwwwwwsewwnwnew\r\nswswswswswneswseswswswseseseswswnwsesese\r\nneneneneneeneenenesenenwnenewnesenenee\r\nwseseswseneeseswneseswseswswwwseswne\r\nnenenenenenenwnenenenesenesewswneneenwe\r\nseeseseseeseneesesenweeewseewsese\r\nneeewneneneneseneenenenenenenesenwne\r\nnenewnweneweseenwnwsesewnwswnwnwnw\r\nsewnwnesenenwneswwnenwnwnwsenweneswe\r\nsenwnwnenwswnwnwnwnenwenenwnwnenenesenw\r\nwnwwwwwsewnwwwewwwweseww\r\nswnwnewnwnwsenwsenwnwnwnenwneswwwnwenenw\r\nwnwseswnewwweewneneeseseesenww\r\nwseseseseeseseseseseesesesenwswswswnw\r\nneneneneneneneseneswnenenwneneneneneenewne\r\nneswswswswswswsesesesesewsewneswsenesw\r\nnenwneswnwweseeenwnesweneeneeese\r\nseesesesesesweeseseseesweenweseenwse\r\nseeswseseseswseseseswswswnenwswswseswsw\r\nswneswswseswswswwswswnwswseswswswswseneswsw\r\nnwseseesesewneeseseeeeeseewenesese\r\nnenenenewneneswneswneneswswneneneneene\r\nnwswnwnenwnwnwnwswnewnwnwnwenwnwnwnww\r\nnwwnwnwnwnenwnwnenwsenenwnenwnwnwnwnw\r\nsenenenwnwewwwneeneewnenwsew\r\nnenenenwneneneneswneneneeswenenenwnenw\r\nwwneweewseswseseneneeseeeseese\r\nneneneeswnenenewneneneneneneswenenene\r\neeeeewseeeneneneeeeeweenwsw\r\nnwenenwnwswwsenwnwswneswnwnwnenwenenwne\r\neswwswneswswswswswnwewswswwswswwswswsw\r\nenwwwwnwnwnwwewwnwnwnwnwseeww\r\nseseseneeseseseseneseseewwseesesesese\r\nnenenweneswnewenw\r\nnenenenwneneneseswnwnwsenwenwewnenenwnw\r\nnenenenwnwnwenwnwswnwnwwnwnwnwnwnwsenw\r\nneeneneneeneneneneneneenesw\r\nneeeneeeswnwnenwsewswswnenwsenwnee\r\nwenwwwswenewwwsewswswnewswwew\r\nseseeneeseseseneseseesesewsesewsesesese\r\nswewnwwsenwnwwseewwnwwwnewwnw\r\nwesesweeneeenewnwsweenenwneeesw\r\nnwnwswnwnwnwnwnwenenwnwswnwnwnwnwnwenenw\r\nnwsenwwswnenwneeesenewenwwwnw\r\newseeeeenweseseseeeewseeseese\r\nwnwnwsewwnwneswwnwwnwnwwnwwwnwnenw\r\nswswsenwwswwenenenewseswswewswnesw\r\nwnwswsesesesweeswseswswswswswseswswsw\r\neneeswnwwnwnwsweenwenwnwnewnwswswnwne\r\nseseswswseseswseswsenesesewsenenwsesww\r\neeeneswnwnwnwneneseneseneenewnenwsee\r\nenweseesweswneeweseenwneeew\r\nnewneneneneeneneswsenenewnenenene\r\neneswwneneenwnenesenewwnenenesenene\r\nswswswswswsesenwswswswswsw\r\neeeneewewneeeee\r\nswswsesenwswsenwswseswsweswseswnwseswswenw\r\nsweneseswswesenenenwnwwnwnwneswe\r\nwnwnwnwwwwsweneswnwnwnwewwnwww\r\nseseswswswsesenwwseeseswswswswweese\r\nseseeseseseseesesesenwnenwsenwsesesesew\r\nwnwnwswnwwwwwwsewwwnenwwwwe\r\nwnwwsenwneewswnwsenwnenwwnwesenwnewsw\r\nswnenwnenenwnwwnwnesenenwnwnenwnenenenwnw\r\nwwewwwwnwswwwnewwwswwwwnw\r\nneneeeweesesenweneneswneeeewne\r\nswswswseneneswwseseseneseseseswswswswswsw\r\nnwnwnenwswwnwwwwnwwwwsew\r\nswswswswseswsesesenwswsewseseswswesesw\r\nnenwswnwnenwswnenwnwnenwnwnwsenwnwneenw\r\nwseseswswswneseswseseswswsenwswswne\r\nswnesesewseneseswswnwswswswswnwswseswswswsw\r\nwnwnwnwnenwsenwneenwswnwnwnwenwsenwswnw\r\nenenenewnenenwnenenenwnenenenenw\r\nenenwnenwsewwwsweenenewnwnenwene\r\nswwswsewnewswneswswwwswswwswwswwsw\r\nneneswseeneeswewenwwswswweesese\r\nswnwseswsenwsenweewenwsweeneeese\r\nnwenwnwnwnwswnwnenwnwnwnwnwnwnwnwwsenw\r\nseseseseeseseseeeeewesenesesewe\r\neswsenwnwneswwswwswnwwwwseeswsenwe\r\nenenewnesenewnwnwnwswnwnwnenesenenwnenw\r\nwneneneeneeeeweenewnenesweesene\r\nenewnweneneeneeeswneneeeeenene\r\nnwswsesenwnenwnwwnwnweswswnwnwneeew\r\neseeewneeneeeeeneeeeeseewene\r\nsewnewwwwwwwsewwwwwwwnwwe\r\nnewnenesenweneneneweneenene\r\nswseswswswswswswswswewswswswswswnwneswswsw\r\neseneneseseeseseeeeseeeeeswsewse\r\nenwneenenewneeneneneswnenenenenenene\r\nnenenwnenenwseneneenwnwnenwnweswnwnww\r\nnwnwenwnwsenwnwnwnwnwwwse\r\nnweswswwswenenweeeseseseeeeeee\r\nnwnenwswnwwnwenwsewwnwneswnwnwnwnwsee\r\nseeseeseseneewswweseseswswwwswswsw\r\nnwnwnesenwenwnwnwnwnwnwwnwneswnwswwnwnw\r\nseseseseswseswesesesesesesenesewswsenw\r\nswswwswseseseseswsewseseneseseswneswswsw\r\nnwnwnwnenwswnwnwnenesenenwnwnenwnwnwnenw\r\nswnewwnwneenwnwenwsenwnwnwsewnwenw\r\neeenwwweeeewseneeswesenese\r\nswenewneseneswneenwnesenenenwnenewene\r\nnwnenwwwwwnewwwwwwwsesenwwww\r\nseseswneseseseeenewwsese\r\nenwneeeswenewneeeeneeseneeee\r\nseseeseneseeeeeeswwnenwseswsesese\r\nnwnesesenenenwnwnenwnwnenenwnewnwnwnenw\r\nwwswnwnwewewswneseeswswswseneswsw\r\nnwsenwneneneneneneeseewnenenenenesenwse\r\nnesewswswneneswneswseswswnewswswsenese\r\nswswwsesweswnwseseswseseswseseseseswsw\r\nsenenwswenwnwnwwnenwsenwnwnwnenwewnwwnw\r\nnenenenwnwneswswneswnenenenenenenenenene\r\nenweneswneneneeswneneeewneenenee\r\nnwnwswnwwnwseesenenwwswwnewwsenwnwnw\r\nneswseseswneeswneneswswneswenwwswwwe\r\nswwneeneeneswwewnwneseeenwnenwnewne\r\nwswwwseenwnewneswwnwwwnwseew\r\nseewwnenenwneswwnenwneseneenenenene\r\nswwsenwswsweseesenwwwswswwnewnesenew\r\nneswswswnenesenenenw\r\nnwwsewwwnwwnewnwwnenwwseswnenwswwnw\r\nnenwneseeewneeeeseneesweneenwsee\r\nseswseswseswnwnwswswseswsweseswswswswse\r\nswwswneswswswswswswneswsweswswswswwswsesw\r\nsenesewseseseeewseweseseseeseesese\r\nswnesenenenwneneneswnwnwne\r\nwsesewwenenwsesewneneseseseswsesese\r\nnewseswwwswwwnwswweswwewswwww\r\nnweneeneneeswnwwenenesweneseneene\r\nesweneenweeeeseweeeneeewew\r\nneswnweswswnenweseswswnesewswsenwsese\r\nnwnwnwnwnwwenwwwnwnw\r\nswswseseswswswswswswswswswsweswneswswnwsw\r\nneneswnenwnenenenenenwnenwne\r\nseeseseneseseswseseseseswsesesenwsesesese\r\nnwnenwnwseenwnewewswsewnwwswswnew\r\nwseesesweseseeneeenwseeeeeenee\r\nswwwsewesewnewnweenwswswwwwwsw\r\neeneseseeseseseseswseewse\r\neeeneseeeeeeswseeenewseeee\r\nswseswswsewenenwnwwnweswne\r\newwnenwswnwnenwnwnwnenenwnwenenenwnw\r\nneswswswswswnwswwswsewsw\r\nseseeseswswewsewsenwseseneewsewneee\r\nseswseswenwwnwswwswewnweseswnwnw\r\nsesesenesesesewswseseswneseswsesesesesese\r\nneneneneneseenenewneeneneswwnesenenew\r\nnweeewneenwswneneswnewne\r\nnwwewwswwwseswwswwne\r\nnwnenwnwnwnwsewnwnwwnwewnwnwnwnwwnwnw\r\nseneneneneenenwnewneneneswneenenwswnenese\r\nswseswnwseswswseseseswnwnewseswswswswswsesw\r\nnwnenenwnwnenwnenwnwseswneneenwnesenwne\r\nnenenesweeenenenenewne\r\neewneeeweeeeseeeneneewene\r\nswsweswswswswswswswswneswnwseswnwwseswsw\r\nwwswwwnwnwewseweswnwnesenwwwew\r\nseeneenenenesenenesweweenenenenwnene\r\nnewewseewnwwnwwwsewsenewswswe\r\nsweeseweseseeeseeenesesesenwese\r\nneswewwwseswwwswsww\r\nwewnwnwnwnwnwwwnwwswesenwnwenwsee\r\nseswsewsewseswswenenewseenwnwnwswse\r\nswswseswseswseswswswnwswswnwsenesesw\r\nnwnwsenenenwsewnenenenwsenwnesesenwnwnwnw\r\nswnenwwwwwseswwneewswswwwnesene\r\nseseseswswsesenesesesesesw\r\neneenwneenenenewswneswnesweee\r\nnwnwneswnenenwsenenenenenenenwnenewnene\r\nseswnewswswswnwswsenwwsweswswnwswesee\r\nswswswswswwswswswewswneswswseswswswneswnw\r\nswswswswswseseswsenwseneesesesesewwsese\r\nseneeesweeeeeeweeeee\r\nsenweseeeenweeeenwenwsweeswese\r\nswswneswseewswswnwswswwsenweswswswesw\r\newneeeeeneweeeeeeweseesesese\r\nnwseswseneeseeseesweeweseesesee\r\nneeneswnenenewnwnenwnenenenwswneenewne\r\neswwswswnwnwseeenwweswnwnenwswswse\r\nwwswnewwswnwwwswwneneeswwseswne\r\nneneneneseneneswneneeneeewne\r\nwwwnwwnewsenweseewwwewwnew\r\nneswwsweewneswsenewsesewwsenwsesese\r\nseswwsweenwweseneseneseneeenwwe\r\nsenwsesweseseswnwseeseswsenesesenenewsw\r\nswseswswswswnenwswswwswswswswswwswenesw\r\nnesenwnwnwnenwnwnwnenwnewnwnwnwnwnesenw\r\nseswswswwswswwswswswswneswswenewnwswsw\r\nnwnwwnwnwnwnenwenwwwenwswwswnwnwnwnww\r\nneseenesenwnwsenwwneesewnewwswenwnenw\r\nwnenwnwnenenenwnenesenwnenenwnenwnenwe\r\nnwnwnwnwnenwnwnesenwnenwnwnenewnwnenwswe\r\nenwswseeseseseewseeswnweeseeeee\r\neeeeeesenwseseeee\r\nswsesweweswwswswswswnwnwwswswsw\r\nneseneneeeenwweneenenenene\r\nswwsenwnenenwnesesewneeswwswseswnwswswse\r\nseeenweesesweseeeweeeseeswnw\r\nsewsesesesesenesweesenwswsesw\r\nnwnenwwnwnwswnwnenwnwwnwnenwnwnwnwsenwe\r\nneenenwneeneswnenwneswneeneeneeneene\r\nseseeeweseseeeeseese\r\nnenwnenwnenenenenwswneneneenwnenenenw\r\nwwwwswswwsweswnewwnewsewwwne\r\nwwnenwnwsewnwnenwsenwnwnwnwnwwwnwnwsw\r\nseseseswswsesenwwsenesesesesesesene\r\nnwseswsesenwwswnenesenenwsw\r\nswswsweswswswseweswnwswswneseswswswnwsw\r\nenweesweneeneeneneeeeeneeewe\r\nseswseseseseswsesewseseseswswsenwesese\r\nseswsesesesenwnewsesesesesesesesesesenwsese\r\nswswswnwswswswseswnweswswswsw\r\nnewnwwswwneeneneseeneswnenenenwnenwnw\r\nswwswnwwswswnwswwewnwsweswswswseesw\r\nsweswnwswenwwswswwwwsweswswswswswsw\r\nnenenwnwsenesenenwnwnwnenenenenenwnwswnwne\r\nwnwseswwewwnewwswnwnwwswewsesww\r\nseseneseseswsesewswsesesesene\r\nwwnwwwewwwewwwnwwwwwnwsww\r\nwneeneesenwseeeeeweeesweswene\r\nsenesenwsweseeseesewseseenesewwsee\r\nnwnwnwsenwnwswesenwenwnwnwnwnwnwnwswnwnwnw\r\neeweeeeeesweneeeseeneeneee\r\nwwsenweswsewswneswswnweneswneenww\r\neeneneneeneeeeenewswneneeseenee\r\nswwseseneswseseweseseswneesenesesese\r\neeeeneneneneneweeee\r\nswsenesewseswsenwnenwsesweswsenwswswswnw\r\nnwnwswsweswnenwnwnwnenenwnwnwnwnwsenenw\r\nswsesweseseseweseeseswnwsesesenwseswsesw\r\neneeseneswswsweeweewnewne\r\nneneeseenenenewenenenewnenenwswesw\r\nsweeswwewsweewnwenwnwnesesenwesw\r\nswswswswswswneswswswsw\r\neseseeneeeseewenwweeeeswsesese\r\nswswwnwswnwwwswewweswwwwswswwe\r\nwwewswwnwwwwwswwwwwweww\r\nenenwnwwnwwwwsesese\r\nwwwwnwswwwswswwwewwwew\r\nwnenwneeswneneneseneewsw\r\nsweswnenenwewsesenwsenw\r\nwsewwenwnwnwwwnwwwnwnwwwnwww\r\neseeeeeeseeeseneeneeewwwee\r\nnwwnwewsewnenenwwnwswwnwwwswnwse\r\nwwswwwwweswwswwswswewwwneww\r\nswnewnwnwnewseswewnesweswswesesw\r\nnwnwnwswnwnenwnwnwnwnwnwewnwenwnwnwnw\r\nswseweswnesewneesenwnesenwwseesew\r\nwenweseesenwseswsesweswnenwneenwse\r\nseeneneneeeenweneene\r\nnwnwnenwneenwneswnenwnwnwnwswnwnwnwnwnw\r\nesesesweswneneneswnwnwnenwneneseww\r\nnwnwwenwnwnenwnenweswwenwnwnwnwnenesw\r\nsenewsewswswseseneswseseseseswsesesese\r\nnwnwnwsesenenwneneswnwnwewnesewnenese\r\nneesesewseseneseseseeseeseseesewsese\r\nswnewneswwswswwwnewsesesenwswswnwsew\r\nneseseswswwseseeswsesesesesesewseswse\r\nswsweswseswswneseeswswswnwnwswwwswneswnw\r\nseeeeseswsesesesesenwsesesee\r\nnenenwnwnwnwnwswsenwnwnwne\r\neswsweswswsweswseswswwnewswwswswswsw\r\nseneswneswswseswswseswswseswswsenenwswswsw\r\neswswseswnwnwsesewseseswseneeswswnesww\r\nseseseesesenwsesesenesewseseseseseesesew\r\nswswswswnweswswnewswswswswswwneswwswsw\r\nneeswnenenesweeneneeneneeneenenewne\r\nneswwswnwnwnwwseseneneewwsesewsew\r\neseseswwwseenesenesesenenwwnwseseswee\r\nswswswseseseseswwswneeswswweswnwsesene\r\nneneneneenesenwwweneswnwswwnwswnenwne\r\nneeeneeeseeneswnenenenenwewnee\r\nnwwnwewsenwnwnwenwesenwneewwnwsw\r\nseswewnwwnwwswnwsenwnwswseenesweene\r\nseswseneseswswseseseweesewwswwnesw\r\nneseeneneneswneeneenenenewneneneenw\r\nnwnwsewnwsenesenwwnewenw\r\nsenwneneswewnenenesenenenwewwnene\r\nnenwenwwswwwwwwwwwewwwwse\r\nsesenwsesesenwseesesenwnwswswsenewese\r\neeenenenwnwsweeeeeeeeeeneneswe\r\nswwwseswwseswswwswwneswswwwnwsww\r\nnwnwwnwwnwnesewnenwnwwwwnenwwwesese\r\nseswswnwswseseseswseswneseseseewswsese\r\nseswswneewneneeswswnwswwwswswnweswse\r\nnwnwnwnwwnwsenwnewnwnwnwneenenenwnwnesw\r\nnenwnwnwnwwnwesenwnwnwnwnwsewwnw\r\nneswwnesenwneswwenwnwsenwnweeswsese\r\nwwnwnwsewnenwwswwnwwwnwwnwnwwew\r\nsewswseseneswseseswswneswseneseseswsesw\r\nswwwnwwwswwswwwwwsewwwnwesww\r\nseneswswwswwnwenwnwwswseeswwwwwwsw\r\nneneswneneswnenesenenenewnenwneneneenw\r\nnwswseseneseseswswswnewswseseseweswnesenw\r\nnenenenenwneseneeneneneneneeswnenenwnee\r\nswseneeeeeeeweneswneweeswwnw\r\nnenenwneeneswneseenewnwswwnwenenenw\r\nsenenwnwwnwsewsewnesenenwwnewsewww\r\nswweeenenenenewseeeeewsenwnee\r\nnwneeseseseseseseseseseswse\r\neeeeweeeeweeneeesweneee\r\nswswseseesesesesesewseseseseneswsewnesesw\r\neeenwseeeswnweeeeeeeeeeeesw\r\nswswswswsweewswswswwsweswseswswnwnww\r\nsesewsenwseeseeseeeenwnweswnesesesw\r\nseseesesesesewseseeswseeseneesesenw\r\nneeenwnenwsweneneseeenee\r\nseenewesenwseseeseseseseee\r\nnwswswsweswswwwwwswswswwswsw\r\nwwwwnewwswnewwwnewwseswseww\r\neeseseseseseseseseesesesesenwenw\r\nwwewwwwwwwnwwwww\r\nswswswwswnewswneswswseswwswswwwswsw\r\nwswneswswswwwwneswwseswswwswwswswsesw\r\nnwnenwnenwnenenenewneneneseenwsenwswnwne\r\nwnweswenwneeswswweseneseneeeenw\r\nwnwneneneenenwnenenenene\r\nnewswwswweeswseseswswwseneswwnew\r\nwsweneeseseseseseseseeseeseseeswene\r\nsesenwseswseseseswseewnwseseswsese\r\nseswnwnwneesenwseneewswnenwee\r\nnwnwnwnwsenwnwnesewwnenenenenenwnenwnwnenw\r\nsenewesweeneswewsenwe\r\nsewewswswwwwswnwwwnewwwwwswsww\r\neeneeeeeneeseneeeneneneeswnwnw\r\nswseswwsewswseseswswseneswswswseseswneswsw\r\nnenenenwneneseneneneneneneeeeneneswnwne\r\nwnwsenwnwnwwsewnwnwnwnwnwewswnenenw\r\nnweeeeeneesweneeeeneeneeswesw\r\nsesewwnewwwwwnwwwnewwseeww\r\nnwswswnwswneswwwnwswswsweeswnweeneee\r\nwwwwwwwwswwwwwsewwnenewww\r\nnenwsenwseeswneswseseswswenwswswseswsww\r\nswswwswnwswwswswwswswwswwwewwnwew\r\nwnwnwnwnewseswwewnwwwnwnwwnwsew\r\nweseeseseseenenewseesewswsesesese\r\nnenenenwnwneswnwneneseneneenwnenwnenew\r\nnwseeeeswnewsewseeeeesesewesee\r\nwwnwwewwwwnwenwnwwwwswnwwww\r\nnwnwnwswnwnwnwenwnwnwnwnwnwnenwnwnwnw\r\nwseswweseseneswnwneseswsewswswseese\r\nneewseeesweeneenee\r\nenwseswswswseseswswswswwswswsenwnwe\r\nsewwnwwewwsewwwwwenwsewwwne\r\nwewswswwnwnenwswneeswnwnesesenwesw\r\nswswnenwneswswswswswswswswwswseneswswswse\r\nwswwswswwswneweswewnwswswwsewwe\r\nwnwwnwwsewswwwwwsenwwwswnenwswnee\r\nseseeswenenesesewsewswneneseseesenwse\r\nsesesesesesesenweneseseseseneswsewswsese\r\nwnwnenenesweneeweneseeeseeene\r\nsewnwwnwnwwnwwwwnwnwwsenwneww\r\nwwswswwnewneseswnewwsenewswwwsew\r\nnenesewneswnwenwwnesw\r\nnweeeeeeseeesenwneswneeweene\r\nnwnwwnwnwnwwnwnwwnwnwwwwew\r\nseseseseseseseseswsenwseswsesesenesesese\r\nseeswnwswnwnwseswsenesesweswse\r\nseseeseseseseeseseenwsewseseswnenesewse\r\nwweswnwwwnwsewwnwnwwnewnwwnwnwenw\r\nneneswswswswswswwswneeswwswseseswswswse\r\nsewnwseseswnwswseswsesenwseswseneseseswe\r\nseseseseseeneseewseswneseeseseseseese\r\newswseswnewswwwswwwswewwnew\r\nswwewwswnesenesenwwnewnw\r\nseseneseswsesenwseseswwnesesesewse\r\nnewswwswwswswswwswwnewswswswwsesw\r\nwseneeeeswnwneenweneneweeeeeee\r\nwswsewswswneswsewneneneswwwwswwsw\r\nswwneeneswswwwswwwsenwswwneswnene\r\nseeeeneeeeeswenweeeseseswsese\r\nsesweeenwnewnwnwneeenwswsewsenwsw\r\nseswnwseeseewnwswneenwnwseswneesee\r\nneswnwwnwnwswnwnwnwnwnwnwenwnwnwnwnwnw\r\nswseswswswseswswneswsw\r\nneeswneneeswsewnwnwneswewnenwenee\r\nswswseswswseswseswnwseswswweswswswneswswse\r\nseseewseeseeeswseseseneseeewee\r\neeeeeseeweswwseene\r\nswswswswswswswswswswseewneswswswswswsw\r\nsenwwwnewseesesenwnwenwwswnwnenwnwnw\r\neeeseswneesweeeeenweeeenee\r\nnewswnesweneneweneneneene\r\nnesenwnenenwnwswseswenwwwwsww\r\nsenewswswwseswswnwwsw\r\nnewwwwsewswwwwswnwsewswsw\r\nnwnwwnwnwsenwnwwnwnwnwnwnenwnwwwenw\r\nswsenwnesesesewswswswswswswswswseswswsw\r\nseneseseswwesewseseneseseeese\r\nwwwsewwwwnwnwswwwwwwwewwsw\r\nneewneeswenenenenenenenenenenewnenew\r\nnwnenwenwnwnwnwwnwnwnwnenewnwneenene\r\nenwwwwwwwwwsenwnwwewww\r\nsenwnwnwnwnwenenwwswneenesweewswswne\r\nnesesesesewsewnesenwseswseswsenwsesesw\r\nseseswswswseseenwseseneswnwnw\r\nseseseseseseeeseeweeseseswnwsenesenw\r\nnenewwswseseswseenwenesenwwwesenwswse\r\nnwnwnwnwswwnweswenwnwnwnwnwnwnwenwswnw\r\nwwwenwsesewnwnwnenwsenewsenwenwwse\r\nswsewswnwwwswewnw\r\nenwnwsenwnwenwnenwnwnwnwnwwswnwnwwew";

let tiles = rawInput.split("\r\n").map(m => {
    let direction = m.match(/((?<!s)e)|(se)|(sw)|((?<!s)w)|(nw)|(ne)/g);
    return [...direction];
});

let tileMap = new Map();

tiles.forEach(directions => {
    let x = 0, y = 0, z = 0;
    directions.forEach(dir => {
        if (dir === "e") {
            y--;
            x++;
        } else if (dir === "ne") {
            x++;
            z--;
        } else if (dir === "se") {
            y--;
            z++;
        } else if (dir === "w") {
            y++;
            x--;
        } else if (dir === "nw") {
            y++;
            z--;
        } else if (dir === "sw") {
            x--;
            z++;
        }
    });
    let key = [x, z, y].join(",");
    tileMap.set(key, !(tileMap.get(key)));
});

let blackTiles = [...tileMap.values()].filter(f => f);
console.log("Go through the renovation crew's list and determine which tiles they need to flip. After all of the instructions have been followed, how many tiles are left with the black side up?\nA:", 
    blackTiles.length
);

for (let i=0;i<100;i++) {
    let initialValues = new Map(tileMap);

    tileMap.forEach((_, key) => {
        let [x, y, z] = key.split(",").map(m=> Number(m));
        let adjacentTilesKeys = [[x,y+1,z-1].join(","), [x-1,y+1,z].join(","), [x-1,y,z+1].join(","), [x,y-1,z+1].join(","), [x+1,y-1,z].join(","), [x+1,y,z-1].join(",")];
        
        adjacentTilesKeys.forEach(key => {
            initialValues.set(key, !!initialValues.get(key));
        });
    });
    
    initialValues.forEach((value, key) => {
        let [x, y, z] = key.split(",").map(m=> Number(m));
        let adjacentTilesKeys = [[x,y+1,z-1].join(","), [x-1,y+1,z].join(","), [x-1,y,z+1].join(","), [x,y-1,z+1].join(","), [x+1,y-1,z].join(","), [x+1,y,z-1].join(",")];
        let blackTilesCount = adjacentTilesKeys.reduce((acc, tileKey) => acc + !!initialValues.get(tileKey),0);
        if (value && (blackTilesCount === 0 || blackTilesCount > 2)) {
            tileMap.set(key, false);
        } else if (!value && blackTilesCount === 2) {
            tileMap.set(key, true);
        } else {
            tileMap.set(key, value);
        }
    });

}

blackTiles = [...tileMap.values()].filter(f => f);
console.log("How many tiles will be black after 100 days?\nA:", blackTiles.length);